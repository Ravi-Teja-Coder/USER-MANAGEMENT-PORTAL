<div class="container">
  <div class="header">
    <h1>User Management Portal</h1>
    <a routerLink="/users/new" class="btn btn-primary">
      + Add New User
    </a>
  </div>

  <!-- ğŸ¯ TEMPLATE-DRIVEN FORM for search -->
  <div class="search-box">
    <input
      type="text"
      placeholder="ğŸ” Search users by name or email..."
      (input)="onSearch($event)"
      class="search-input"
    />
  </div>

  <!-- ğŸ¯ @if directive (Angular 20 control flow) -->
  @if (user.loading()) {
    <div class="loading">â³ Loading users...</div>
  }

  @if (user.error()) {
    <div class="error">âŒ {{ user.error() }}</div>
  }

  <!-- ğŸ¯ @for directive (Angular 20 control flow) -->
  @if (!user.loading() && filteredUsers().length > 0) {
    <div class="user-grid">
      @for (user of filteredUsers(); track user.id) {
        <div class="user-card" appHighlight="#f0f8ff">
          <div class="user-header">
            <h3>{{ user.name }}</h3>
            <span class="user-id">#{{ user.id }}</span>
          </div>
          
          <div class="user-info">
            <p><strong>ğŸ“§ Email:</strong> {{ user.email }}</p>
            <p><strong>ğŸ“± Phone:</strong> {{ user.phone }}</p>
            <p><strong>ğŸ¢ Company:</strong> {{ user.company.name }}</p>
            <p><strong>ğŸŒ Website:</strong> {{ user.website }}</p>
          </div>

          <div class="user-actions">
            <a [routerLink]="['/users', user.id]" class="btn btn-info">
              ğŸ‘ï¸ View
            </a>
            <a [routerLink]="['/users', user.id, 'edit']" class="btn btn-warning">
              âœï¸ Edit
            </a>
            <!-- <button (click)="deleteUser(user.id)" class="btn btn-danger">
              ğŸ—‘ï¸ Delete
            </button> -->
          </div>
        </div>
      }
    </div>
  }

  @if (!user.loading() && filteredUsers().length === 0) {
    <div class="no-results">
      <p>No users found matching "{{ searchTerm() }}"</p>
    </div>
  }
</div>